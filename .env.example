# ─────────────────────────────────────────────────────────────────────────────
# MazeVault — Environment Configuration Template
# ─────────────────────────────────────────────────────────────────────────────
# Copy to .env and fill in all __PLACEHOLDER__ values before starting.
#
# SECURITY: This file contains secrets — set permissions: chmod 600 .env
# ─────────────────────────────────────────────────────────────────────────────

# ── Image Registry ──────────────────────────────────────────────────────────
# For GHCR (default):  ghcr.io/axiemirror
# For private registry: registry.corp.com/mazevault
# For offline/local:    ghcr.io/axiemirror (images loaded from tarball)
IMAGE_REGISTRY=ghcr.io/axiemirror
IMAGE_TAG=latest

# ── PostgreSQL ──────────────────────────────────────────────────────────────
POSTGRES_USER=mazevault
POSTGRES_PASSWORD=__POSTGRES_PASSWORD__
POSTGRES_DB=mazevault
# Optional: use a custom image for air-gapped (e.g., registry.corp.com/postgres:15-alpine)
# POSTGRES_IMAGE=postgres:15-alpine

# ── Redis ───────────────────────────────────────────────────────────────────
REDIS_PASSWORD=__REDIS_PASSWORD__
REDIS_MAX_MEMORY=256mb
# REDIS_IMAGE=redis:7-alpine

# ── Application Secrets ─────────────────────────────────────────────────────
# Generate with: openssl rand -base64 48 | tr -d '\n/+='
JWT_SECRET=__JWT_SECRET__
MASTER_KEY=__MASTER_KEY__
SESSION_SECRET=__SESSION_SECRET__

# ── TLS / HTTPS ─────────────────────────────────────────────────────────────
# Set to true to skip certificate generation (e.g., if behind a load balancer)
MAZEVAULT_TLS_SKIP_INIT=false

# Domain name for self-signed certificate SANs
MAZEVAULT_DOMAIN=localhost

# Path to directory with custom certs (server.crt + server.key)
# If these files exist, init-certs will use them instead of generating self-signed
# CUSTOM_CERT_DIR=./certs

# ── Port Mapping ────────────────────────────────────────────────────────────
FRONTEND_PORT=443
FRONTEND_HTTP_PORT=80
BACKEND_PORT=8443

# ── Application ─────────────────────────────────────────────────────────────
MAZEVAULT_ENV=production
MAZEVAULT_ORCHESTRATOR_MODE=false
LOG_LEVEL=info
ALLOWED_ORIGINS=https://localhost
CORS_ALLOWED_ORIGINS=https://localhost

# ── Resource Limits (optional) ──────────────────────────────────────────────
# BACKEND_MEMORY_LIMIT=1g
# FRONTEND_MEMORY_LIMIT=256m
